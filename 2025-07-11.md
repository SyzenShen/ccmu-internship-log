ğŸ§¬ å®ä¹ æ—¥å¿— Day 5 | è¡¨æ ¼é¢„å¤„ç† + é€šè·¯å¯è§†åŒ–ç»†èŠ‚ä¼˜åŒ–

æ—¶é—´ï¼š2025å¹´7æœˆ11æ—¥
åœ°ç‚¹ï¼šé¦–éƒ½åŒ»ç§‘å¤§å­¦ç”Ÿä¿¡å®éªŒå®¤
å…³é”®è¯ï¼šè¡¨æ ¼æ¸…æ´—ã€Pythonè‡ªåŠ¨åŒ–ã€Sankeyå›¾ã€æ°”æ³¡å›¾ã€é€šè·¯æ ‡è®°åŸºå› å±•ç¤º

---

## ğŸ’¡ ä»Šå¤©åšäº†ä»€ä¹ˆ

ä»Šå¤©ä¸»è¦å¤„ç†äº†ä¸‰ä¸ªä»»åŠ¡ï¼š

1. ç¼–å†™å¹¶è°ƒè¯•äº†ä¸€ä¸ª Python è„šæœ¬ï¼Œç”¨äºå¤§è§„æ¨¡ `.xlsx` è¡¨æ ¼çš„è‡ªåŠ¨é¢„å¤„ç†ï¼›
2. å®ç°äº†é€šè·¯æ ‡è®°åŸºå› ä¸ç›®æ ‡åŸºå› åœ¨å›¾ä¸­çš„åŒæ­¥å±•ç¤ºï¼›
3. æˆåŠŸå®Œæˆäº†ä¸€ä¸ªæ¡‘åŸºå›¾ä¸æ°”æ³¡å›¾çš„ç»„åˆå¯è§†åŒ–ï¼Œå¹¶è°ƒè¯•äº†é…è‰²ã€å› å­é¡ºåºã€æ ¼å¼ç­‰ç»†èŠ‚ã€‚

---

## ğŸ§¾ Excel è¡¨æ ¼è‡ªåŠ¨é¢„å¤„ç†è„šæœ¬ï¼ˆPythonï¼‰

ç¼–å†™å¹¶æµ‹è¯•äº†ä¸€ä¸ªè‡ªåŠ¨åŒ–å¤„ç† `library.xlsx` çš„ Python è„šæœ¬ï¼Œæ”¯æŒå¤šä¸ªæ•°æ®æ¸…æ´—æ­¥éª¤ï¼Œé€‚ç”¨äºå‡ åƒè¡Œæ•°æ®çš„æ‰¹é‡å¤„ç†ã€‚

åŠŸèƒ½æ¨¡å—ï¼š

* è‡ªåŠ¨å®‰è£…ä¸å¯¼å…¥ä¾èµ–åº“ï¼›
* åˆ¤æ–­ç¬¬ 135 åˆ—æ˜¯å¦å­˜åœ¨ï¼Œè‹¥ä¸å­˜åœ¨åˆ™æ•´è¡Œåˆ¤ä¸ºä¸å¯ç”¨ï¼›
* å¯¹ç¬¬ 2 åˆ—ç¼ºå¤±é¡¹æŒ‰ç¼–å·é¡ºå»¶è§„åˆ™è¡¥å…¨ï¼›
* è‹¥ç¬¬ 46 åˆ—ç¼ºå¤±ï¼Œè‡ªåŠ¨ç”¨ç¬¬ 5 åˆ—ä¿¡æ¯è¡¥å…¨ï¼›
* åˆ é™¤ç¬¬ 1 åˆ—é‡å¤çš„è¡Œï¼›
* è‹¥ 4â€“6 åˆ—å‡ç¼ºå¤±ï¼Œåˆ™ç»Ÿä¸€å¡«å……ä¸º NaNï¼›
* ä¿å­˜ä¸º `final_library.xlsx` æ–‡ä»¶ã€‚

è„šæœ¬ç»“æ„æ¸…æ™°ï¼Œè¾“å‡ºç¨³å®šï¼Œè¿è¡Œé€Ÿåº¦è¾ƒå¿«ï¼Œé€‚é…æ—¥å¸¸è¡¨æ ¼æ¸…æ´—ä»»åŠ¡ã€‚

---

## ğŸ”¬ é€šè·¯æ ‡è®°åŸºå› ä¸ç›®æ ‡åŸºå› åŒæ­¥å¯è§†åŒ–ï¼ˆRï¼‰

å®Œæˆäº†ä¸€ä¸ª R è„šæœ¬ï¼Œå±•ç¤ºé€šè·¯ä¸å…¶å¯¹åº”çš„æ ‡è®°åŸºå› æˆ–ç›®æ ‡åŸºå› ï¼Œå¢å¼ºé€šè·¯è§£é‡Šæ€§ã€‚

å®ç°ç»†èŠ‚ï¼š

* ä½¿ç”¨è‡ªå®šä¹‰æ•°æ®ç»“æ„ç»„ç»‡ pathway ä¸ gene å¯¹åº”å…³ç³»ï¼›
* åˆ©ç”¨ ggplot ç»˜åˆ¶é€šè·¯ä¸åŸºå› çš„è¿æ¥çº¿ï¼›
* è‡ªåŠ¨è°ƒæ•´æ ‡ç­¾ä½ç½®ï¼Œé¿å…é‡å ï¼›
* è‡ªå®šä¹‰é¢œè‰²æ–¹æ¡ˆè¡¨ç¤ºä¸åŒé€šè·¯ç±»åˆ«ï¼›
* è¾“å‡ºå›¾åƒä¸º PDFï¼Œä¾¿äºæ’ç‰ˆä½¿ç”¨ã€‚

---

## ğŸ”— æ¡‘åŸºå›¾ä¸æ°”æ³¡å›¾ç»„åˆï¼ˆRï¼‰

è¿™ä¸ªå›¾ç‰‡ç›¸å½“æ¼‚äº®ï¼Œæ˜¯ä¸€ä¸ªå±•ç¤ºé€šè·¯ä¸ä»£è°¢ç‰©å…³ç³»çš„æ¡‘åŸºå›¾ä¸æ°”æ³¡å›¾çš„ç»„åˆã€‚

å¤„ç†æµç¨‹ï¼š

* åˆ©ç”¨ `ggsankey` å’Œ `ggplot2` æ„å»ºå›¾å±‚ï¼›
* ç”¨ `make_long()` å‡½æ•°è°ƒæ•´æ•°æ®æ ¼å¼ï¼›
* å°†èŠ‚ç‚¹è½¬æ¢ä¸º factorï¼Œæ§åˆ¶æ˜¾ç¤ºé¡ºåºï¼›
* ä½¿ç”¨ `cols4all` è‡ªå®šä¹‰é…è‰²æ–¹æ¡ˆï¼Œé¿å…é¢œè‰²é‡å¤ï¼›
* æœ€ç»ˆé€šè¿‡ `gridExtra` å®ç°ä¸¤å›¾åˆå¹¶è¾“å‡ºã€‚

é…è‰²è°ƒæ•´å’Œæ ‡ç­¾ä½ç½®ä¼˜åŒ–è¾ƒè€—æ—¶ï¼Œä½†æœ€ç»ˆå›¾åƒæ¸…æ™°ã€ç»“æ„æ˜ç¡®ã€‚

---

## ğŸ§  æ”¶è·

* å¤§å¹…æå‡äº† Python å¯¹ Excel è¡¨æ ¼çš„å¤„ç†èƒ½åŠ›ï¼›
* æé«˜äº†åœ¨ ggplot ä¸­å¯¹å›¾å±‚é¡ºåºã€é…è‰²ã€æ ‡ç­¾ä½ç½®çš„æ§åˆ¶èƒ½åŠ›ï¼›
* æ˜ç¡®äº†Linuxå­¦ä¹ è·¯å¾„ï¼›
* å¯¹ç”Ÿç‰©å®éªŒä¸­çš„æ•°æ®æœ‰æ›´æ¸…æ™°çš„è®¤è¯†ï¼›
* å¯¹Linuxç³»ç»Ÿä½¿ç”¨æ›´ç†Ÿç»ƒã€‚

---

## ğŸ—‚ é¡¹ç›®è¿›å±•ä¸ GitHub ç®¡ç†

* ğŸ—ƒ `scripts/`ï¼šæ–°å¢ä¸‰ä¸ªè„šæœ¬ï¼ˆPython è¡¨æ ¼æ¸…æ´—ã€é€šè·¯åŸºå› å±•ç¤ºã€Sankey æ°”æ³¡ç»„åˆå›¾ï¼‰ï¼Œä»£ç ç»“æ„ä¼˜åŒ–ï¼›
* ğŸ“ˆ `plots/`ï¼šè¾“å‡ºæ–°çš„ PDF å›¾åƒå¹¶ä¸Šä¼ ï¼›
* ğŸ“„ `README.md`ï¼šæ›´æ–°äº†ä»Šæ—¥æ–°å¢è„šæœ¬è¯´æ˜ä¸ä½¿ç”¨æ–¹æ³•ï¼›

---

## âœ… ä¸‹å‘¨ç›®æ ‡é¢„å‘Šï¼ˆä»Šå¤©å‘¨äº”ï¼‰

* è¦å¼€å§‹ç€é‡å­¦Linuxäº†ï¼›
* æ¢³ç†ç›®å‰å¯è§†åŒ–è„šæœ¬ä¸­å¯ä»¥æ¨¡å—åŒ–çš„éƒ¨åˆ†ï¼›
* æ•´ç†ä»Šå¤©çš„ Python è„šæœ¬æ€è·¯ï¼Œè€ƒè™‘æ‹“å±•ä¸ºå¯å¤ç”¨æ¨¡å—ã€‚


# ğŸ§¬ Internship Log Day 5 | Table Preprocessing + Pathway Visualization Refinement

**Date:** July 11, 2025
**Location:** Bioinformatics Lab, Capital Medical University
**Keywords:** Table cleaning, Python automation, Sankey diagram, bubble chart, pathway marker gene visualization

---

## ğŸ’¡ What I Did Today

Today, I focused on three main tasks:

1. Wrote and debugged a Python script for batch preprocessing of `.xlsx` tables;
2. Implemented synchronized visualization of pathway marker genes and target genes;
3. Completed a combined Sankey and bubble chart visualization, refining color schemes, factor order, and formatting details.

---

## ğŸ§¾ Excel Table Auto-Preprocessing Script (Python)

I developed and tested a Python script to automatically clean and process `library.xlsx`, designed to handle thousands of rows efficiently.

**Key Features:**

* Auto-installation and import of required libraries;
* If column 135 is missing, the entire row is marked as invalid;
* Column 2 missing values are auto-filled using a sequential ID rule;
* If column 46 is missing, it's filled with data from column 5;
* Duplicate rows based on column 1 are removed;
* If columns 4 to 6 are all missing, theyâ€™re filled with `NaN`;
* The cleaned file is saved as `final_library.xlsx`.

The script is modular, reliable, and fast, making it ideal for daily data cleaning tasks.

---

## ğŸ”¬ Synchronized Visualization of Pathway Marker and Target Genes (R)

An R script was completed to simultaneously display pathways and their associated marker/target genes, improving the biological interpretability of pathway diagrams.

**Implementation Highlights:**

* Custom data structures map pathways to gene sets;
* `ggplot` is used to draw connecting lines between pathways and genes;
* Labels are automatically adjusted to prevent overlap;
* A custom color scheme distinguishes pathway categories;
* Output is saved as PDF for easy layout and publication use.

---

## ğŸ”— Combined Sankey and Bubble Chart (R)

This combined chart turned out beautifullyâ€”it visualizes the relationship between pathways and metabolites through a Sankey diagram paired with a bubble chart.

**Workflow Summary:**

* Built with `ggsankey` and `ggplot2`;
* Reformatted data using the `make_long()` function;
* Converted nodes to factors to control display order;
* Used the `cols4all` package to apply custom color palettes and avoid duplication;
* Final layout was arranged and exported using `gridExtra`.

The color adjustments and label fine-tuning took time, but the final result is clear and well-structured.

---

## ğŸ§  Key Takeaways

* Significantly improved Python skills for Excel data processing;
* Gained better control over plot layering, color schemes, and label positioning in `ggplot`;
* Clarified my learning path for Linux;
* Developed a deeper understanding of biological experimental data;
* Became more proficient in Linux operations.

---

## ğŸ—‚ Project Progress & GitHub Management

* ğŸ—ƒ `scripts/`: Added three new scripts (Python for table cleaning, pathway-gene visualization, and Sankey-bubble combo plot); improved code structure;
* ğŸ“ˆ `plots/`: Exported new PDF figures and uploaded them;
* ğŸ“„ `README.md`: Updated with descriptions and usage instructions for todayâ€™s new scripts.

---

## âœ… Goals for Next Week (Today is Friday)

* Start focusing on learning Linux systematically;
* Review and modularize reusable components from current visualization scripts;
* Refactor todayâ€™s Python logic into a reusable module for future applications.

Time is going quick today, and maybe I fell in learning things in that speed. What a good day!
